---
sidebar_position: 12
title: "Aula 12: Feedback Visual de Quiz"
description: "ModalBottomSheet para feedback de acerto/erro, animaÃ§Ãµes de resposta e transiÃ§Ãµes."
---

# Aula 12: Feedback Visual de Quiz

:::info ðŸ”€ Branch da Aula
Esta aula refere-se Ã  branch: **`aula-12`**
```bash
git checkout aula-12
```
:::

## ðŸ“– Conceito

O feedback visual Ã© crucial para a experiÃªncia de aprendizado. ApÃ³s o aluno responder uma questÃ£o, um **ModalBottomSheet** aparece com resultado claro â€” verde para acerto, vermelho para erro.

### ModalBottomSheet

```kotlin
@OptIn(ExperimentalMaterial3Api::class)
@Composable
fun FeedbackBottomSheet(
    isCorrect: Boolean,
    explanation: String,
    onDismiss: () -> Unit
) {
    val sheetState = rememberModalBottomSheetState()

    ModalBottomSheet(
        onDismissRequest = onDismiss,
        sheetState = sheetState,
        containerColor = if (isCorrect)
            Color(0xFF4CDF20).copy(alpha = 0.15f)
        else
            Color(0xFFFF453A).copy(alpha = 0.15f)
    ) {
        Column(
            modifier = Modifier.padding(24.dp),
            horizontalAlignment = Alignment.CenterHorizontally
        ) {
            Icon(
                imageVector = if (isCorrect) Icons.Default.CheckCircle
                              else Icons.Default.Cancel,
                contentDescription = null,
                tint = if (isCorrect) Color(0xFF4CDF20) else Color(0xFFFF453A),
                modifier = Modifier.size(48.dp)
            )
            Spacer(modifier = Modifier.height(16.dp))
            Text(
                text = if (isCorrect) "Correto! ðŸŽ‰" else "Incorreto ðŸ˜”",
                style = MaterialTheme.typography.headlineSmall,
                fontWeight = FontWeight.Bold
            )
            Spacer(modifier = Modifier.height(8.dp))
            Text(text = explanation, style = MaterialTheme.typography.bodyMedium)
            Spacer(modifier = Modifier.height(24.dp))
            StitchButton(
                text = "Continuar",
                onClick = onDismiss
            )
        }
    }
}
```

## ðŸ’» CÃ³digo de ReferÃªncia

```kotlin title="screens/QuizScreen.kt (atualizado com feedback)"
@Composable
fun QuizScreen(/* ... */) {
    val uiState by viewModel.uiState.collectAsStateWithLifecycle()

    // ConteÃºdo do quiz...
    QuizContent(uiState = uiState, onAction = viewModel::onAction)

    // Bottom Sheet de feedback
    if (uiState.showFeedback) {
        FeedbackBottomSheet(
            isCorrect = uiState.lastAnswerCorrect,
            explanation = uiState.feedbackExplanation,
            onDismiss = { viewModel.onAction(QuizAction.NextQuestion) }
        )
    }
}
```

## ðŸ’» MÃ£o na Massa

import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

<Tabs>
  <TabItem value="ex1" label="ExercÃ­cio 1 â€” FixaÃ§Ã£o" default>

### Customize as cores do BottomSheet

Altere o `FeedbackBottomSheet` para usar as cores exatas do Design System:
- Acerto: `StitchGreen (#4CDF20)` com alpha 0.15
- Erro: `StitchError (#FF453A)` com alpha 0.15

Use `MaterialTheme.colorScheme` em vez de cores hardcoded.

  </TabItem>
  <TabItem value="ex2" label="ExercÃ­cio 2 â€” AplicaÃ§Ã£o">

### Adicione animaÃ§Ã£o no Ã­cone

Use `animateColorAsState` para que o Ã­cone de resultado faÃ§a uma transiÃ§Ã£o suave de cor. Adicione tambÃ©m um `AnimatedVisibility` para que o Sheet apareÃ§a com animaÃ§Ã£o de slide-up.

  </TabItem>
  <TabItem value="ex3" label="ExercÃ­cio 3 â€” Desafio">

### Fluxo completo: Quiz â†’ Feedback â†’ PrÃ³xima questÃ£o

Integre com o `QuizViewModel` da **Aula 11**:
1. ApÃ³s `Submit`, chame `POST /progress/submit`
2. Exiba o `FeedbackBottomSheet` com o resultado
3. Ao clicar "Continuar", avance para a prÃ³xima questÃ£o
4. Ao finalizar todas as questÃµes, navegue de volta com `navController.popBackStack()`

  </TabItem>
</Tabs>
