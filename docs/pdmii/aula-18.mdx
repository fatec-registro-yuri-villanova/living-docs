---
sidebar_position: 18
title: "Aula 18: Anima√ß√µes em Compose"
description: "AnimatedVisibility, animateAsState, transi√ß√µes de tela e micro-intera√ß√µes."
---

# Aula 18: Anima√ß√µes em Compose

:::info üîÄ Branch da Aula
Esta aula refere-se √† branch: **`aula-18`**
```bash
git checkout aula-18
```
:::

## üìñ Conceito

Anima√ß√µes transformam uma interface funcional em uma experi√™ncia encantadora. O Compose oferece APIs de anima√ß√£o declarativas que s√£o simples de usar mas poderosas.

### Tipos de Anima√ß√£o

| API | Uso | Complexidade |
|-----|-----|-------------|
| `animateXxxAsState` | Propriedade √∫nica (cor, tamanho, opacidade) | Simples |
| `AnimatedVisibility` | Aparecer/desaparecer componentes | Simples |
| `AnimatedContent` | Trocar um conte√∫do por outro | M√©dia |
| `Animatable` | Controle total sobre anima√ß√£o | Avan√ßado |
| `InfiniteTransition` | Loops cont√≠nuos | M√©dia |

### Exemplos Pr√°ticos

```kotlin
// Cor animada no bot√£o de op√ß√£o
val backgroundColor by animateColorAsState(
    targetValue = if (isSelected)
        Color(0xFF4CDF20).copy(alpha = 0.15f)
    else
        Color.Transparent,
    animationSpec = tween(300),
    label = "optionBg"
)

// Visibilidade com anima√ß√£o
AnimatedVisibility(
    visible = showBanner,
    enter = slideInVertically() + fadeIn(),
    exit = slideOutVertically() + fadeOut()
) {
    ErrorBanner(message = errorMessage)
}
```

## üíª C√≥digo de Refer√™ncia

```kotlin title="components/AnimatedOptionButton.kt"
@Composable
fun AnimatedOptionButton(
    text: String,
    isSelected: Boolean,
    isCorrect: Boolean?,
    onClick: () -> Unit
) {
    val borderColor by animateColorAsState(
        targetValue = when {
            isCorrect == true -> Color(0xFF4CDF20)
            isCorrect == false -> Color(0xFFFF453A)
            isSelected -> Color(0xFF4CDF20)
            else -> Color(0xFF333333)
        },
        animationSpec = tween(300),
        label = "border"
    )

    val scale by animateFloatAsState(
        targetValue = if (isSelected) 1.02f else 1f,
        animationSpec = spring(dampingRatio = Spring.DampingRatioMediumBouncy),
        label = "scale"
    )

    Surface(
        modifier = Modifier
            .fillMaxWidth()
            .graphicsLayer { scaleX = scale; scaleY = scale }
            .clickable(onClick = onClick),
        shape = RoundedCornerShape(12.dp),
        border = BorderStroke(2.dp, borderColor),
        color = borderColor.copy(alpha = 0.08f)
    ) {
        Text(
            text = text,
            modifier = Modifier.padding(16.dp),
            style = MaterialTheme.typography.bodyLarge
        )
    }
}
```

## üíª M√£o na Massa

import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

<Tabs>
  <TabItem value="ex1" label="Exerc√≠cio 1 ‚Äî Fixa√ß√£o" default>

### Anime a barra de progresso do quiz

Use `animateFloatAsState` para que a `LinearProgressIndicator` do quiz (Aula 11) transite suavemente entre valores.

  </TabItem>
  <TabItem value="ex2" label="Exerc√≠cio 2 ‚Äî Aplica√ß√£o">

### AnimatedContent para troca de quest√µes

Use `AnimatedContent` no `QuizScreen` para que a transi√ß√£o entre quest√µes tenha um efeito de slide horizontal.

  </TabItem>
  <TabItem value="ex3" label="Exerc√≠cio 3 ‚Äî Desafio">

### Micro-intera√ß√µes completas

Adicione anima√ß√µes em todo o app:
1. `AnimatedVisibility` no `ErrorBanner` (Aula 05)
2. `animateColorAsState` nos `OptionButton` do quiz (Aula 11)
3. Transi√ß√£o de `fadeIn` + `slideIn` no `FeedbackBottomSheet` (Aula 12)
4. Pulse animation no `StreakBadge` (Aula 15)

  </TabItem>
</Tabs>
