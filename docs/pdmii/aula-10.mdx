---
sidebar_position: 10
title: "Aula 10: Listagem de Li√ß√µes e Cursos"
description: "LazyColumn, carregamento din√¢mico, estados de UI para listas e pull-to-refresh."
---

# Aula 10: Listagem de Li√ß√µes e Cursos

:::info üîÄ Branch da Aula
Esta aula refere-se √† branch: **`aula-10`**
```bash
git checkout aula-10
```
:::

## üìñ Conceito

**LazyColumn** √© o equivalente ao `RecyclerView` no Compose ‚Äî renderiza apenas os itens vis√≠veis na tela, garantindo performance mesmo com listas enormes.

### LazyColumn vs Column

```kotlin
// ‚ùå Column: renderiza TODOS os itens (lento para listas grandes)
Column {
    items.forEach { item -> LessonItem(item) }
}

// ‚úÖ LazyColumn: renderiza apenas o VIS√çVEL (perform√°tico)
LazyColumn {
    items(lessons) { lesson ->
        LessonItem(lesson)
    }
}
```

### Estados de Lista

```kotlin
@Composable
fun CourseListScreen(viewModel: CourseViewModel = koinViewModel()) {
    val uiState by viewModel.uiState.collectAsStateWithLifecycle()

    when {
        uiState.isLoading -> ShimmerList()          // Skeleton loading
        uiState.error != null -> ErrorState(uiState.error!!)
        uiState.courses.isEmpty() -> EmptyState()   // Sem dados
        else -> CourseList(uiState.courses)
    }
}
```

### Keys para performance

```kotlin
LazyColumn {
    items(
        items = lessons,
        key = { lesson -> lesson.id } // Est√°vel para recomposi√ß√£o
    ) { lesson ->
        LessonItem(lesson = lesson)
    }
}
```

## üíª C√≥digo de Refer√™ncia

```kotlin title="screens/HomeScreen.kt"
@Composable
fun HomeScreen(
    viewModel: HomeViewModel = koinViewModel(),
    onCourseClick: (String) -> Unit
) {
    val uiState by viewModel.uiState.collectAsStateWithLifecycle()

    LazyColumn(
        modifier = Modifier
            .fillMaxSize()
            .background(MaterialTheme.colorScheme.background),
        contentPadding = PaddingValues(16.dp),
        verticalArrangement = Arrangement.spacedBy(12.dp)
    ) {
        // Header
        item {
            Text(
                text = "Ol√°, ${uiState.userName} üëã",
                style = MaterialTheme.typography.headlineMedium
            )
            Spacer(modifier = Modifier.height(4.dp))
            Text(
                text = "Continue aprendendo",
                style = MaterialTheme.typography.bodyMedium,
                color = MaterialTheme.colorScheme.onSurfaceVariant
            )
        }

        // Lista de cursos
        items(items = uiState.courses, key = { it.id }) { course ->
            StitchCard(
                title = course.title,
                subtitle = "${course.completedLessons}/${course.totalLessons} li√ß√µes",
                modifier = Modifier.clickable { onCourseClick(course.id) }
            )
        }
    }
}
```

## üíª M√£o na Massa

import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

<Tabs>
  <TabItem value="ex1" label="Exerc√≠cio 1 ‚Äî Fixa√ß√£o" default>

### Adicione Spacer entre se√ß√µes

No `LazyColumn`, adicione um `Spacer` de `24.dp` entre o header e a lista de cursos usando `item { Spacer(...) }`.

  </TabItem>
  <TabItem value="ex2" label="Exerc√≠cio 2 ‚Äî Aplica√ß√£o">

### Implemente uma `EmptyState`

Crie um Composable `EmptyState` que exiba:
- Um √≠cone grande (ex: `Icons.Default.School`)
- Texto "Nenhum curso dispon√≠vel"
- Um `StitchButton` "Tentar Novamente" que dispare `HomeAction.Refresh`

Integre no fluxo `when` de estados do `HomeScreen`.

  </TabItem>
  <TabItem value="ex3" label="Exerc√≠cio 3 ‚Äî Desafio">

### Lista de Li√ß√µes com estados visuais

Na `CourseDetailScreen`, use `LazyColumn` para mostrar li√ß√µes com 3 estados visuais distintos:
1. **Conclu√≠da** ‚Äî √≠cone de check verde (`StitchGreen`)
2. **Dispon√≠vel** ‚Äî destaque visual, clic√°vel
3. **Bloqueada** ‚Äî opacidade reduzida, n√£o clic√°vel

Use os dados do `GET /progress/history/{userId}` (via `ProgressRepository` da Aula 09) para determinar o estado de cada li√ß√£o.

  </TabItem>
</Tabs>
