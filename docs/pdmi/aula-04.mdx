---
sidebar_position: 4
title: "Aula 04: FlatList e Dados Remotos"
description: "FlatList para listas performÃ¡ticas, fetch de dados da API e renderizaÃ§Ã£o de cursos."
---

import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

# Aula 04: FlatList e Dados Remotos

:::info ðŸ”€ Branch da Aula
Esta aula refere-se Ã  branch: **`aula-04`**
```bash
git checkout aula-04
```
:::

## ðŸ“– Conceito

A **FlatList** Ã© o componente de lista performÃ¡tico do React Native â€” renderiza apenas os itens visÃ­veis na tela (equivalente ao `LazyColumn` do Compose ou `RecyclerView` do Android).

### Arquivos novos nesta branch

| Arquivo | DescriÃ§Ã£o |
|---------|-----------|
| `app/details.tsx` | Tela de detalhes do curso |

## ðŸ’» CÃ³digo de ReferÃªncia

### FlatList com dados da API

```tsx title="app/(tabs)/index.tsx (aula-08)"
interface Course {
    id: string;
    title: string;
    description: string;
}

export default function CoursesScreen() {
    const [courses, setCourses] = useState<Course[]>([]);
    const [loading, setLoading] = useState(true);

    useEffect(() => { fetchCourses(); }, []);

    async function fetchCourses() {
        setLoading(true);
        try {
            const data = await apiClient.db.from('courses');
            const result = await data.select();
            if (result) setCourses(result);
        } catch (error: any) {
            console.error('Erro ao buscar cursos:', error.message);
        } finally { setLoading(false); }
    }

    const renderItem = ({ item }: { item: Course }) => (
        <View style={styles.card}>
            <View style={styles.cardHeader}>
                <Ionicons name="school-outline" size={24}
                          color={Colors.colors.stitchGreen} />
                <Text style={styles.cardTitle}>{item.title}</Text>
            </View>
            <Text style={styles.cardDesc}>{item.description}</Text>
        </View>
    );

    return (
        <SafeAreaView style={styles.safeArea}>
            {loading ? (
                <View style={styles.centered}>
                    <ActivityIndicator size="large"
                                       color={Colors.colors.stitchGreen} />
                    <Text style={styles.loadingText}>Sincronizando trilhas...</Text>
                </View>
            ) : (
                <FlatList
                    data={courses}
                    keyExtractor={(item) => item.id}
                    renderItem={renderItem}
                    contentContainerStyle={styles.list}
                    ListEmptyComponent={
                        <View style={styles.centered}>
                            <Ionicons name="cloud-offline-outline"
                                      size={64} color="#333" />
                            <Text style={styles.emptyText}>
                                Nenhuma trilha encontrada.
                            </Text>
                        </View>
                    }
                />
            )}
        </SafeAreaView>
    );
}
```

## ðŸ’» MÃ£o na Massa

<Tabs>
  <TabItem value="ex1" label="ExercÃ­cio 1 â€” FixaÃ§Ã£o" default>

### Adicione `ListEmptyComponent`

Quando a lista estiver vazia, exiba um Ã­cone e texto informativo. Use `<Ionicons name="cloud-offline-outline" />`.

  </TabItem>
  <TabItem value="ex2" label="ExercÃ­cio 2 â€” AplicaÃ§Ã£o">

### Navegue ao clicar no card

Wrappe o card com `TouchableOpacity` e navegue para `app/details.tsx` passando o `id` via `router.push("/course/" + item.id)`.

  </TabItem>
  <TabItem value="ex3" label="ExercÃ­cio 3 â€” Desafio">

### Pull-to-refresh

Adicione `refreshing={refreshing}` e `onRefresh={fetchCourses}` Ã  `FlatList` para permitir atualizaÃ§Ã£o ao puxar a lista.

  </TabItem>
</Tabs>
