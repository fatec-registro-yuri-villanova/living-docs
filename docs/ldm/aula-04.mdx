---
sidebar_position: 4
title: "Aula 04: CRUD Endpoints"
description: "Endpoints REST completos para Courses â€” GET, POST, PUT, DELETE com Ktor Routing."
---

# Aula 04: CRUD Endpoints

:::info ðŸ”€ Branch da Aula
Esta aula refere-se Ã  branch: **`aula-04`**
```bash
git checkout aula-04
```
:::

:::caution ðŸš§ ConteÃºdo Prospectivo
Esta branch ainda nÃ£o possui cÃ³digo implementado.
:::

## ðŸ“– Conceito

CRUD (Create, Read, Update, Delete) Ã© o padrÃ£o base de qualquer API REST. Cada endpoint mapeia para uma operaÃ§Ã£o no Supabase via Postgrest.

## ðŸ’» CÃ³digo de ReferÃªncia

```kotlin title="server/.../routes/CourseRoutes.kt"
fun Route.courseRoutes(supabase: SupabaseClient) {
    route("/api/courses") {
        get {
            val courses = supabase.postgrest.from("courses").select()
            call.respond(courses.decodeList<Course>())
        }
        get("/{id}") {
            val id = call.parameters["id"]!!
            val course = supabase.postgrest.from("courses")
                .select { filter { eq("id", id) } }
            call.respond(course.decodeSingle<Course>())
        }
        post {
            val body = call.receive<CreateCourseRequest>()
            supabase.postgrest.from("courses").insert(body)
            call.respond(HttpStatusCode.Created)
        }
        delete("/{id}") {
            val id = call.parameters["id"]!!
            supabase.postgrest.from("courses").delete { filter { eq("id", id) } }
            call.respond(HttpStatusCode.NoContent)
        }
    }
}
```

## ðŸ’» MÃ£o na Massa

import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

<Tabs>
  <TabItem value="ex1" label="ExercÃ­cio 1 â€” FixaÃ§Ã£o" default>

Implemente o endpoint `PUT /api/courses/{id}` para atualizaÃ§Ã£o parcial.

  </TabItem>
  <TabItem value="ex2" label="ExercÃ­cio 2 â€” AplicaÃ§Ã£o">

Adicione paginaÃ§Ã£o com `?page=1&limit=10` usando `range()` do Postgrest.

  </TabItem>
  <TabItem value="ex3" label="ExercÃ­cio 3 â€” Desafio">

Crie rotas para `Lessons` (aulas dentro de um curso) com relaÃ§Ã£o `course_id` e busca aninhada.

  </TabItem>
</Tabs>
