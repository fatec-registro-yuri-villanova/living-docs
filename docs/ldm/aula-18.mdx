---
sidebar_position: 18
title: "Aula 18: Docker e ContainerizaÃ§Ã£o"
description: "Dockerfile multi-stage, docker-compose e deployment containerizado."
---

import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

# Aula 18: Docker e ContainerizaÃ§Ã£o
:::info ðŸ”€ Branch da Aula
**`aula-18`** â€” `git checkout aula-18`
:::
:::caution ðŸš§ ConteÃºdo Prospectivo
Esta branch ainda nÃ£o possui cÃ³digo implementado.
:::
## ðŸ“– Conceito
Docker empacota o server Ktor em um container reproduzÃ­vel. Multi-stage build reduz o tamanho da imagem.
## ðŸ’» CÃ³digo de ReferÃªncia
```dockerfile title="Dockerfile"
FROM gradle:8.7-jdk17 AS build
WORKDIR /app
COPY . .
RUN gradle :server:buildFatJar --no-daemon

FROM eclipse-temurin:17-jre-alpine
WORKDIR /app
COPY --from=build /app/server/build/libs/server-all.jar app.jar
EXPOSE 8080
ENTRYPOINT ["java", "-jar", "app.jar"]
```
```yaml title="docker-compose.yml"
services:
  server:
    build: .
    ports:
      - "8080:8080"
    environment:
      - SUPABASE_URL=${SUPABASE_URL}
      - SUPABASE_KEY=${SUPABASE_KEY}
```
## ðŸ’» MÃ£o na Massa

<Tabs>
  <TabItem value="ex1" label="ExercÃ­cio 1 â€” FixaÃ§Ã£o" default>
Execute `docker build -t mergeskills-api .` e `docker run -p 8080:8080 mergeskills-api`.
  </TabItem>
  <TabItem value="ex2" label="ExercÃ­cio 2 â€” AplicaÃ§Ã£o">
Configure variÃ¡veis de ambiente via `.env` file com `docker-compose --env-file .env up`.
  </TabItem>
  <TabItem value="ex3" label="ExercÃ­cio 3 â€” Desafio">
Reduza a imagem final usando `alpine` e verifique o tamanho com `docker images`.
  </TabItem>
</Tabs>
