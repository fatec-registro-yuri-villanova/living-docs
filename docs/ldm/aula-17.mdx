---
sidebar_position: 17
title: "Aula 17: Testes no Server"
description: "Testes unitÃ¡rios e de integraÃ§Ã£o com Ktor testApplication e MockK."
---

import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

# Aula 17: Testes no Server
:::info ğŸ”€ Branch da Aula
**`aula-17`** â€” `git checkout aula-17`
:::
:::caution ğŸš§ ConteÃºdo Prospectivo
Esta branch ainda nÃ£o possui cÃ³digo implementado.
:::
## ğŸ“– Conceito
O Ktor fornece `testApplication` para testar endpoints sem subir o servidor. MockK permite mockar o Supabase para testes isolados.
## ğŸ’» CÃ³digo de ReferÃªncia
```kotlin title="server/src/test/kotlin/.../HealthRouteTest.kt"
class HealthRouteTest {
    @Test
    fun `GET health returns 200`() = testApplication {
        application { module() }
        val response = client.get("/api/health")
        assertEquals(HttpStatusCode.OK, response.status)
        val body = response.body<HealthResponse>()
        assertEquals("Status UP", body.status)
    }
}
```
## ğŸ’» MÃ£o na Massa

<Tabs>
  <TabItem value="ex1" label="ExercÃ­cio 1 â€” FixaÃ§Ã£o" default>
Crie teste para `GET /api/courses` com Supabase mockado.
  </TabItem>
  <TabItem value="ex2" label="ExercÃ­cio 2 â€” AplicaÃ§Ã£o">
Teste `POST /auth/login` com credenciais vÃ¡lidas e invÃ¡lidas.
  </TabItem>
  <TabItem value="ex3" label="ExercÃ­cio 3 â€” Desafio">
Implemente testes para `StreakService` com datas mockadas (ontem, hoje, 3 dias atrÃ¡s).
  </TabItem>
</Tabs>
