---
sidebar_position: 12
title: "Aula 12: Push Notifications Server"
description: "Envio de push notifications via Expo Push API a partir do Ktor server."
---

import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

# Aula 12: Push Notifications Server
:::info ðŸ”€ Branch da Aula
**`aula-12`** â€” `git checkout aula-12`
:::
:::caution ðŸš§ ConteÃºdo Prospectivo
Esta branch ainda nÃ£o possui cÃ³digo implementado.
:::
## ðŸ“– Conceito
O server envia push notifications para lembrar alunos sobre streaks, novos quizzes ou badges desbloqueados. Usa a Expo Push API.
## ðŸ’» CÃ³digo de ReferÃªncia
```kotlin title="server/.../services/PushService.kt"
class PushService(private val httpClient: HttpClient) {
    suspend fun sendPush(token: String, title: String, body: String) {
        httpClient.post("https://exp.host/--/api/v2/push/send") {
            contentType(ContentType.Application.Json)
            setBody(mapOf(
                "to" to token, "title" to title,
                "body" to body, "sound" to "default"
            ))
        }
    }
}
```
## ðŸ’» MÃ£o na Massa

<Tabs>
  <TabItem value="ex1" label="ExercÃ­cio 1 â€” FixaÃ§Ã£o" default>
Salve o push token do client em `user_push_tokens` no Supabase.
  </TabItem>
  <TabItem value="ex2" label="ExercÃ­cio 2 â€” AplicaÃ§Ã£o">
Envie push automaticamente quando o streak estÃ¡ prestes a expirar (22h sem atividade).
  </TabItem>
  <TabItem value="ex3" label="ExercÃ­cio 3 â€” Desafio">
Implemente batch push para todos os alunos quando um novo curso Ã© publicado.
  </TabItem>
</Tabs>
